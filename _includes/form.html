{% if page.form.size > 0 %}
<form class="animated fadeIn bastille-form col s12 hide-on-load"
      action="https://getsimpleform.com/messages?form_api_token={{ site.simple_form.api_token }}"
      method="post" enctype="multipart/form-data">

  {{ site.url }}
  <input type='hidden' name='redirect_to' value='{{ site.domain }}/thankyou' />

  <div class="row">
  {% for field in page.form %}

    {% assign form_data = field.label | downcase | replace: " ", "_" %}

    {% if field.type == 'file' %}
      <div class="file-field input-field col s6">
        <div class="btn">
          <span>{{ field.label }}</span>
          <input type="file" name="{{ field.label }}" >
        </div>
        <div class="file-path-wrapper">
          <input class="file-path validate" type="text">
        </div>
      </div>
    {% else %}
      <div class="input-field col s6">
        <input id="{{ form_data }}" type="{{ field.type }}" name="{{ field.label }}" class="validate">
        <label for="{{ form_data }}">{{ field.label }}</label>
      </div>
    {% endif %}

  {% endfor %}
  </div>

  <div class="row col s12 center-align">
    <button class="btn waves-effect">Submit
      <i class="material-icons right">send</i>
    </button>
  </div>

</form>

{% include loading.html %}

<!-- TODO: migrate to it's own js file -->
<script>
  $(document).ready(function() {
    $("form").removeClass("hide-on-load");

    $("button").click(function() {
      $("form").removeClass("fadeIn");
      $("form").addClass("fadeOut").delay(500).queue(function(next){
          // $("html, body").animate({ scrollTop: 100 }, 200);
          $(".bastille-loading").addClass("active animated fadeIn");
          next();
      });
    });

  });
</script>

{% endif %}
